{% extends "blog/base.html" %}
{% load blog_tags %}
{% block title %}{{ post.title }}{% endblock title %}

{% block content %}
  <h1 class="text-primary">{{ post.title }}</h1>
  <hr>
  <p>
    <span class="text-primary fw-bold">Tags:</span>
    {% for tag in post.tags.all %}
      <a href="{% url "blog:post_list_by_tag" tag.slug %}">
        {{ tag.name }}
      </a>{% if not forloop.last %}, {% endif %}
    {% endfor %}
  </p>
  <p class="fst-italic text-secondary">
    Published {{ post.publish }} by <span class="text-primary">{{ post.author }}</span>
  </p>
  {{ post.body|markdown }}
  <p>
    <a href="{% url "blog:post_share" post.id %}">
      Share this post
    </a>
  </p>

  <h2>Similar posts</h2>
  {% for post in similar_posts %}
    <p>
      <a href="{{ post.get_absolute_url }}">
        {{ post.title }}
      </a>
    </p>
  {% empty %}
    There are no similar posts yet.
  {% endfor %}
  {% with comments.count as total_comments %}
    <h2>
      {{ total_comments }} comment{{ total_comments|pluralize }}
    </h2>
  {% endwith %}
  {% for comment in comments %}
    <div class="card my-4">
      <div class="card-header">
        <span class="fst-italic text-secondary">
          Comment {{ forloop.counter }} by <span class="text-primary">{{ comment.name }}</span>
          {{ comment.created }}
        </span>
      </div>
      <div class="card-body">
        {{ comment.body }}
      </div>
    </div>
  {% empty %}
    <p>There are no comments.</p>
  {% endfor %}
  {% include "blog/post/includes/comment_form.html" %}
{% endblock content %}